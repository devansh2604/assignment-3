#include <iostream>
using namespace std;

int main() {
    char exp[300];
    cout << "Enter expression (e.g., (a+b)*{c+[d]}) : ";
    cin >> exp;

    char st[300];
    int top = -1;
    bool ok = true;

    for (int i = 0; exp[i] != '\0'; i++) {
        char c = exp[i];
        if (c == '(' || c == '{' || c == '[') st[++top] = c;
        else if (c == ')' || c == '}' || c == ']') {
            if (top == -1) { ok = false; break; }
            char t = st[top--];
            if ((c == ')' && t != '(') ||
                (c == '}' && t != '{') ||
                (c == ']' && t != '[')) { ok = false; break; }
        }
    }
    if (top != -1) ok = false;

    cout << (ok ? "Balanced\n" : "Not Balanced\n");
    return 0;
}
