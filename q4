#include <iostream>
#include <ctype.h>
using namespace std;

int prec(char op) {
    if (op == '^') return 3;
    if (op == '*' || op == '/') return 2;
    if (op == '+' || op == '-') return 1;
    return 0;
}
int isRightAssoc(char op) { return op == '^'; }

int main() {
    char infix[300];
    cout << "Enter infix (no spaces): ";
    cin >> infix;

    char st[300];  int top = -1;
    char post[300]; int k = 0;

    for (int i = 0; infix[i] != '\0'; i++) {
        char c = infix[i];
        if (isalnum(c)) {
            post[k++] = c;                      // operand
        } else if (c == '(') {
            st[++top] = c;
        } else if (c == ')') {
            while (top != -1 && st[top] != '(') post[k++] = st[top--];
            if (top != -1 && st[top] == '(') top--; // pop '('
        } else { // operator
            while (top != -1 && st[top] != '(' &&
                  (prec(st[top]) > prec(c) ||
                  (prec(st[top]) == prec(c) && !isRightAssoc(c)))) {
                post[k++] = st[top--];
            }
            st[++top] = c;
        }
    }
    while (top != -1) post[k++] = st[top--];
    post[k] = '\0';

    cout << "Postfix: " << post << "\n";
    return 0;
}
